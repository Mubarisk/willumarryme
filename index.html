<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Will You Marry Me, Shabeeha Jabin? ‚ù§Ô∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --pink-soft: #fff5f7;
            --pink-accent: #ffb6c1;
            --rose-deep: #e11d48;
        }
        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--pink-soft);
            overflow: hidden;
            transition: background-color 1.5s ease;
            touch-action: manipulation;
        }
        .dancing-script {
            font-family: 'Dancing Script', cursive;
        }
        .background-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        .heart {
            position: absolute;
            color: rgba(255, 182, 193, 0.4);
            animation: float 15s linear infinite;
            filter: drop-shadow(0 0 5px rgba(255,182,193,0.5));
        }
        @keyframes float {
            0% { transform: translateY(110vh) translateX(0) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-10vh) translateX(20vw) rotate(360deg); opacity: 0; }
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px 0 rgba(255, 182, 193, 0.37);
        }
        #no-btn {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .music-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            border: 2px solid var(--pink-accent);
            color: var(--rose-deep);
        }
        .fade-out { opacity: 0; transform: translateY(10px); }
        .fade-in { opacity: 1; transform: translateY(0); }
        .transition-content { transition: all 0.5s ease; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div class="background-hearts" id="hearts-container"></div>
    
    <audio id="bg-music" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    </audio>

    <div id="music-control" class="music-btn">
        <i class="fas fa-play"></i>
    </div>

    <div id="content-card" class="text-center p-6 sm:p-10 glass-card rounded-[2.5rem] max-w-lg w-full relative z-10 transition-all duration-700">
        <!-- New Cartoon Image -->
        <!-- <div class="mb-4 flex justify-center">
            <img src="romantic_cartoon_couple_1772186522386.png" alt="Cute Proposal Cartoon" class="w-32 sm:w-40 h-auto drop-shadow-lg scale-110 hover:scale-125 transition-transform duration-500">
        </div> -->

        <div id="dynamic-content" class="transition-content">
            <div id="image-container" class="mb-6 relative h-40 sm:h-56 flex items-center justify-center overflow-hidden rounded-3xl">
                <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExZDBjN3dtdXZxNXRyNDJkNjBpdjB5dmhscDRoMDJ6cnc5MzhxeWwzYyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/GaW7Duawe9YHuGrYlc/giphy.gif" 
                     alt="Proposal GIF" 
                     class="max-h-full w-full object-cover">
            </div>
            
            <h1 id="question-text" class="dancing-script text-4xl sm:text-6xl text-rose-600 mb-2 font-bold leading-tight">
                Shabeeha Jabin,
            </h1>
            <h2 id="sub-question" class="dancing-script text-3xl sm:text-5xl text-rose-500 mb-8 font-semibold">
                Will you marry me?
            </h2>

            <div class="flex flex-col sm:flex-row justify-center items-center gap-4 sm:gap-8 relative min-h-[60px]" id="button-group">
                <button id="yes-btn" class="w-full sm:w-auto bg-gradient-to-r from-pink-500 to-rose-600 hover:from-pink-600 hover:to-rose-700 text-white text-xl font-bold py-4 px-12 rounded-full transition-all transform hover:scale-110 active:scale-95 shadow-[0_10px_20px_rgba(225,29,72,0.3)] cursor-pointer order-1">
                    Yes! üíç
                </button>
                <button id="no-btn" class="w-auto px-6 py-2 text-sm sm:text-base sm:py-4 sm:px-12 bg-white/80 hover:bg-white text-gray-500 font-semibold rounded-full border-2 border-pink-100 transition-all shadow-sm cursor-pointer sm:order-2">
                    No
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script>
        const yesBtn = document.getElementById('yes-btn');
        const noBtn = document.getElementById('no-btn');
        const dynamicContent = document.getElementById('dynamic-content');
        const contentCard = document.getElementById('content-card');
        const body = document.body;
        const heartsContainer = document.getElementById('hearts-container');
        const music = document.getElementById('bg-music');
        const musicControl = document.getElementById('music-control');

        // Music Logic
        let isPlaying = false;
        musicControl.addEventListener('click', toggleMusic);
        function toggleMusic() {
            if (isPlaying) { music.pause(); musicControl.innerHTML = '<i class="fas fa-play"></i>'; }
            else { music.play(); musicControl.innerHTML = '<i class="fas fa-pause"></i>'; }
            isPlaying = !isPlaying;
        }

        // Floating Hearts
        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.innerHTML = ['‚ù§Ô∏è', 'üíñ', 'üíù', '‚ú®'][Math.floor(Math.random() * 4)];
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.fontSize = (Math.random() * 15 + 15) + 'px';
            heart.style.animationDuration = (Math.random() * 8 + 7) + 's';
            heartsContainer.appendChild(heart);
            setTimeout(() => heart.remove(), 15000);
        }
        setInterval(createHeart, 450);

        // Flip-Away No Button Logic
        function flipAway() {
            const margin = 20; 
            const btnWidth = noBtn.offsetWidth;
            const btnHeight = noBtn.offsetHeight;
            
            // Generate random position strictly inside the viewport
            const newX = Math.random() * (window.innerWidth - btnWidth - margin * 2) + margin;
            const newY = Math.random() * (window.innerHeight - btnHeight - margin * 2) + margin;

            // Ensure fixed position immediately to avoid jumping from initial relative position
            if (noBtn.style.position !== 'fixed') {
                const rect = noBtn.getBoundingClientRect();
                noBtn.style.left = `${rect.left}px`;
                noBtn.style.top = `${rect.top}px`;
                noBtn.style.position = 'fixed';
                noBtn.style.margin = '0';
            }

            // Animate to the new exact coordinates
            gsap.to(noBtn, {
                duration: 0.4,
                left: newX,
                top: newY,
                rotation: Math.random() * 360,
                scale: 0.8 + Math.random() * 0.4,
                ease: "power2.out"
            });
        }

        // Trigger on hover/touch
        noBtn.addEventListener('mouseenter', flipAway);
        noBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            flipAway();
        });

        // Yes Button Logic - Smooth Transition
        yesBtn.addEventListener('click', () => {
            if (!isPlaying) toggleMusic();
            
            const end = Date.now() + (8 * 1000);
            (function frame() {
                confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#ff69b4', '#e11d48'] });
                confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#ff69b4', '#e11d48'] });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());

            dynamicContent.classList.add('fade-out');
            
            setTimeout(() => {
                dynamicContent.innerHTML = `
                    <div class="mb-6 h-64 flex items-center justify-center overflow-hidden rounded-3xl">
                        <img src="https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExNzIxNjh3dmlwaWJhZm5saGx1N3Q4b2xtYjA5eG51Y3lqajV0b2k5ZyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/vO7Qmr2WaV6ZFwpXdW/giphy.gif" 
                             class="max-h-full w-full object-cover shadow-inner">
                    </div>
                    <h1 class="dancing-script text-4xl sm:text-6xl text-rose-600 mb-4 font-bold">Yay! Shabeeha!</h1>
                    <h2 class="dancing-script text-2xl sm:text-4xl text-rose-500 mb-8">I knew you'd say yes! ‚ù§Ô∏èüíç</h2>
                    <div class="bg-rose-50/80 p-6 rounded-3xl border border-rose-100 shadow-sm mb-4">
                        <p class="text-rose-600 text-xl font-medium italic">"Every day with you is a gift. I can't wait to spend the rest of my life by your side."</p>
                    </div>
                `;
                dynamicContent.classList.remove('fade-out');
                dynamicContent.classList.add('fade-in');
                body.style.backgroundColor = '#ffe4e6';
            }, 500);
        });
    </script>
</body>
</html>
